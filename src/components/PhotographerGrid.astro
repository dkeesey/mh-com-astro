---
import { getCollection } from 'astro:content';
import { Image } from 'astro:assets';

interface Photographer {
  name: string;
  link: string;
  birthYear: string;
  birthPlace: string;
  deathYear?: string;
  deathPlace?: string;
  camp: string;
  image?: string;
}

interface Props {
  photographers: Photographer[];
}

const { photographers } = Astro.props;

// Import all photographer banner images
const imageImports = {
  akiya: (await import('../images/family-album/banners/akiyaban.gif')).default,
  ayukawa: (await import('../images/family-album/banners/ayukawa.ban.gif')).default, 
  fukuyama: (await import('../images/family-album/banners/fukuyamaban.gif')).default,
  miyatake: (await import('../images/family-album/banners/miyatakeban.gif')).default,
  morioka: (await import('../images/family-album/banners/moriokaban.gif')).default,
  tsuyuki: (await import('../images/family-album/banners/tsuyukiban.gif')).default,
  professional: (await import('../images/family-album/banners/professionalban.gif')).default
};
---

<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
  {photographers.map((photographer) => {
    const photographerId = photographer.link.split('/').pop();
    const bannerImage = imageImports[photographerId as keyof typeof imageImports] || imageImports['professional'];
    
    return (
      <div class="border rounded-lg p-6 hover:shadow-lg transition-shadow">
        <a href={photographer.link} class="block">
          {bannerImage && (
            <Image
              src={bannerImage}
              alt={`${photographer.name}'s photographs`}
              class="w-full h-auto mb-4"
              width={400}
              height={300}
            />
          )}
          <h3 class="text-xl font-semibold mb-2">{photographer.name}</h3>
          <p class="text-sm text-gray-600 mb-1">
            Born: {photographer.birthYear}, {photographer.birthPlace}
          </p>
          {photographer.deathYear && (
            <p class="text-sm text-gray-600 mb-1">
              Died: {photographer.deathYear}
              {photographer.deathPlace && `, ${photographer.deathPlace}`}
            </p>
          )}
          <p class="text-sm text-gray-600">Camp: {photographer.camp}</p>
        </a>
      </div>
    );
  })}
</div>